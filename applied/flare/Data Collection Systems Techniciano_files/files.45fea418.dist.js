try{"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[5372],{98137:(e,t,a)=>{var n=a(59155);var i=a.n(n);t["Z"]=(0,n.makeStyles)((e=>{let{palette:t}=e;return(0,n.createStyles)({root:{},icon:{position:"absolute",left:"8px"},header:{paddingLeft:"21px",position:"relative",display:"flex",justifyContent:"space-between","&:hover":{"& $icon":{"& svg":{fill:t.primary.main}}},cursor:"pointer"},closed:{height:0,overflow:"hidden"},iconOpen:{transform:"rotate(90deg)"}})}))},66773:(e,t,a)=>{a.d(t,{z:()=>m});var n=a(89835);var i=a(23321);var o=a(59155);var s=a(28380);var l=a(178);var r=a(56445);var d=a(60042);var c=a.n(d);var f=a(41768);var u=(0,o.makeStyles)((e=>{let{palette:t,typography:a}=e;return(0,o.createStyles)({row:{display:"flex",alignItems:"center"},collapse:{borderBottom:`1px solid ${t.gray[300]}`},collapseHeader:{alignItems:(0,r.ifFeature)("encore","center"),justifyContent:(0,r.ifFeature)("encore","flex-start"),paddingLeft:(0,r.ifFeature)("encore","25px"),columnGap:(0,r.ifFeature)("encore","8px"),paddingTop:"9px",paddingBottom:"9px",color:t.gray[900],"&:hover, &:focus-visible":{color:t.primary.main,backgroundColor:t.gray[100],cursor:"pointer"}},collapseTitle:{paddingLeft:"8px"},selectedIcon:{"& svg":{fill:`${t.primary.main} !important`}},subCollapse:{paddingLeft:"15px","& > div":{paddingTop:"3px",paddingBottom:"3px","& > span":{paddingBottom:"1px"}}},preventRotate:{transform:"rotate(0deg) !important"},rotateChevron:{"& ~ svg":{transform:"rotate(90deg)"}},collapseIcon:{paddingTop:(0,r.ifFeature)("encore","5px"),"& svg":{fill:t.gray[900]}},endIcon:{paddingTop:"1px",paddingRight:"16px","& svg":{fill:`${t.primary.main} !important`}},selectedText:{color:t.primary.main,fontWeight:a.fontWeightSemibold},headerDisabled:{"& svg":{fill:`${t.gray[500]} !important`},"&:hover":{"& svg":{fill:t.gray[500]},cursor:"default",backgroundColor:"initial",color:"initial"}},headerTextDisabled:{color:t.gray[500]},addedPadding:{paddingLeft:"14px"},documentTab:{justifyContent:"space-between",paddingLeft:(0,r.ifFeature)("encore",0),"& svg":{marginRight:"10px",marginLeft:"14px",height:(0,r.ifFeature)("encore",undefined,"14px"),width:(0,r.ifFeature)("encore",undefined,"12px"),fill:t.gray[900]},"&:hover":{"& svg":{fill:t.primary.main}}},documentTabSelected:{color:t.primary.main,"& svg":{fill:t.primary.main}},documentTabDisabled:{cursor:"default",pointerEvents:"none","& span":{color:t.gray[500],"& svg":{fill:t.gray[500]}}}})}));var $=a(26570);const p="DOCUMENT_TAB";const m=e=>{const t=u();const{initialSelection:a,onChange:d,isFolder:m,movingFolder:h,folderOptions:g,maxFolderDepth:v,canEditPage:w}=e;const[b,y]=(0,i.useState)(a);(0,i.useEffect)((()=>{d(b)}),[b]);const x=b===p;const S=e=>{if(!m){return false}if(h.id===e.value){return true}if(e.depth===v){return true}if(+h.childrenDepth+ +e.depth>=v){return true}return false};const C=e=>{const a=!!e.items.length;const i=e.depth===0;const l=b===e.value;return(0,n.Z)(f.U.Panel,{classes:{root:c()({[t.collapse]:i,[t.subCollapse]:!i}),header:t.collapseHeader,headerText:c()(t.collapseTitle,{[t.selectedText]:l}),icon:c()(t.collapseIcon,{[t.preventRotate]:(0,r.ifFeature)("encore",true,!a),[t.selectedIcon]:l}),...(0,r.ifFeature)("encore",{iconOpen:t.rotateChevron}),headerDisabled:t.headerDisabled,headerTextDisabled:t.headerTextDisabled},disabled:S(e),endElement:(0,r.ifFeature)("encore",a&&(0,n.Z)(o.IconV2,{color:"neutral-extra-strong",name:"chevron-right-regular",size:16}),l?(0,n.Z)("span",{className:t.endIcon},void 0,(0,n.Z)(o.Icon,{brand:true,name:"fab-check-circle-12x12"})):null),icon:(0,r.ifFeature)("encore",(0,n.Z)(o.IconV2,{color:l?"primary-strong":"neutral-strong",name:l?"folder-check-solid":"folder-regular",size:16}),a?"":(0,n.Z)(s.Z,{})),onOpen:e=>y(e),panelKey:e.value,title:e.text},e.value,(0,n.Z)(f.U,{},void 0,e.items.map(C)))};return(0,n.Z)("div",{},void 0,m&&(0,n.Z)("div",{className:c()(t.collapseHeader,t.row,t.collapse,t.documentTab,{[t.documentTabSelected]:x,[t.documentTabDisabled]:!w}),onClick:w?()=>y(p):()=>null,onKeyDown:()=>null,role:"button",tabIndex:0},void 0,(0,n.Z)("span",{},void 0,(0,r.ifFeature)("encore",(0,n.Z)(o.IconV2,{color:x?"primary-strong":"neutral-medium",name:x?"file-check-solid":"file-regular",size:16}),(0,n.Z)(l.Z,{})),$.__("Documents Tab")),x&&(0,n.Z)("span",{className:t.endIcon},void 0,(0,r.ifFeature)("encore",undefined,(0,n.Z)(o.Icon,{brand:true,name:"fab-check-circle-12x12"})))),(0,n.Z)("div",{className:c()({[t.addedPadding]:m})},void 0,(0,n.Z)(f.U,{accordian:true},void 0,g.map(C))))}},49175:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(89835);var i=a(23321);var o=a(59155);var s=a(56445);var l=a(37194);var r=a(97106);var d=a(60658);var $=a(26570);const c=true;const f=(0,o.makeStyles)((e=>{let{palette:t,typography:a}=e;return(0,o.createStyles)({subheader:{marginTop:"5px",color:t.grey[900],textAlign:"center"},disclaimer:{display:"flex",margin:"0 auto"},disclaimerIcon:{marginRight:"10px",paddingLeft:"10px",fontSize:a.fabricFontSize("small"),height:"50px"},disclaimerText:{flex:"1",color:t.grey[900],textAlign:"left",fontSize:a.fabricFontSize("small")},confirmationContentOverride:{"& input.fab-TextInput":{width:"64px"},"& input.fab-TextInput:focus":{borderColor:"rgb(194, 11, 11) !important",boxShadow:"0 1px 0 0 rgba(194, 11, 11, .33) !important"}},employeeList:{marginTop:"5px",marginBottom:"10px"},employeeName:{color:t.grey[900]},fileCount:{color:t.error.main}})}));function u(e){const{fileCount:t,employeeCount:a,hasTemplates:u,employeeId:p,sectionId:m,deleteAction:h,affectedEmployees:g}=e;const v=f();const[w,b]=(0,i.useState)(false);const[y,x]=(0,i.useState)(true);const S=$.__n("Delete from %1 Employee","Delete from %1 Employees",a);const C=(0,n.Z)(l.Message,{text:$._("That's right. This folder and all files in it will be deleted from all employees.")});const F=(0,n.Z)(l.Message,{params:[a],text:$._n('Type "**{1}**" to show you realize that {1} employee will lose files.','Type "**{1}**" to show you realize that {1} employees will lose files.',a)});const I=(0,n.Z)(l.Message,{params:[g.length],text:$._n("{1} employee will lose files:","{1} employees will lose files:",g.length)});const M=u?(0,n.Z)("div",{className:v.disclaimer},void 0,(0,n.Z)("div",{className:v.disclaimerIcon},void 0,(0,s.ifFeature)("encore",(0,n.Z)(o.IconV2,{color:"neutral-extra-strong",name:"folder-solid",size:12}),(0,n.Z)(r.O,{fabricColorName:"gray9",iconName:"fab-folder-closed-12x10"}))),(0,n.Z)("div",{className:v.disclaimerText},void 0,(0,n.Z)(l.Message,{text:$._("Also, 1 or more E-signature templates are set to save to this folder. They will now be saved in the **Signed Documents** folder.")}))):null;const E=[];g.forEach((e=>E.push((0,n.Z)("p",{className:v.employeeName},void 0,e.employee_name," ",(0,n.Z)("span",{className:v.fileCount},void 0,"(",$.__n("%1 file","%1 files",e.count),")")))));const T=c?(0,n.Z)("div",{},void 0,(0,n.Z)("b",{},void 0,I),(0,n.Z)("div",{className:v.employeeList},void 0,E)):null;let A;if(t===1){A=$.__n("You're about to delete %1 file from %2 employee","You're about to delete %1 file from %2 employees",t,a)}else{A=$.__n("You're about to delete %1 files from %2 employee","You're about to delete %1 files from %2 employees",t,a)}function P(){x(false)}function j(e){if(Number(e.target.value)===Number(a)){b(true)}else{b(false)}}function D(){(0,d.Mr)()}function k(){h(p,m,t).then((function(){P()}))}return(0,n.Z)(o.StandardModal,{isOpen:y,onCloseComplete:D,onRequestClose:P},void 0,(0,n.Z)(o.StandardModal.Body,{renderFooter:(0,n.Z)(o.StandardModal.Footer,{actions:(0,s.ifFeature)("encore",[(0,n.Z)(o.TextButton,{onClick:k,disabled:!w,type:"button"},"secondary",S),(0,n.Z)(o.Button,{onClick:P,type:"button"},"primary",$._("Don't Delete"))],[(0,n.Z)(o.Button,{clickAction:P,type:"button"},"primary",$._("Don't Delete")),(0,n.Z)(o.Button,{clickAction:k,isDisabled:!w,secondary:true,type:"button"},"secondary",S)])}),renderHeader:(0,n.Z)(o.StandardModal.Header,{hasCloseButton:true,title:$.__("Just Checking...")})},void 0,(0,n.Z)(o.StandardModal.Constraint,{},void 0,(0,n.Z)(o.StandardModal.HeroHeadline,{icon:(0,s.ifFeature)("encore",(0,n.Z)(o.IconV2,{color:"error-strong",name:"trash-can-regular",size:48}),(0,n.Z)("span",{},void 0,(0,n.Z)(r.O,{fabricColorName:"danger",iconName:"fab-trash-can-43x48"}))),text:A}),(0,n.Z)("div",{className:v.subheader},void 0,C),(0,n.Z)("div",{className:v.confirmationContentOverride},void 0,(0,n.Z)(o.StandardModal.Constraint,{},void 0,(0,n.Z)(o.StandardModal.ConfirmationContent,{confirmationText:(0,n.Z)("div",{},void 0,T,(0,n.Z)("p",{},void 0,c?"":$.__("We really want to make sure this is clear.")),(0,n.Z)("p",{},void 0,F)),onConfirmationChange:j}))),(0,n.Z)("div",{},void 0,M))))}},8098:(e,t,a)=>{a.d(t,{H0:()=>i,M9:()=>n,tg:()=>o});var $=a(26570);function n(){const e="/employees/files/";o(e)}function i(){const e="/files/";o(e)}function o(e){let t=0;let a=[];const n=new Date;$(".file-checkbox input:checkbox:checked").each((function(){a.push(getFileId($(this).attr("id")));t++}));if(t>0){window.location=e+"download.php?stop=stop&file_ids="+a.join()+"&t="+n.getTime()}return false}},82692:(e,t,a)=>{a.d(t,{K:()=>o});var n=a(56255);var i=a(63196);var $=a(26570);function o(e){const{id:t,type:a,size:o,filename:s}=e.dataset;const l=()=>{const e=$(`.js-secure-download-detail-button[data-file-id="${t}"]`);if(e){if(e.hasClass("hidden")){e.removeClass("hidden")}const t=e.find(".sfsCount");const a=e.find(".sfsDetailCopy");if(t){const e=parseInt($(t).text(),10);const n=e+1;$(t).text(n);if(a){$(a).text((0,i.ao)(n))}}}};if(o==="0"){(0,n.W)({filename:s})}else{(0,n.K)({id:t,type:a,onSfsCreation:l})}}},2898:(e,t,a)=>{a.d(t,{$:()=>s});var n=a(59592);var i=a(17842);var o=a.n(i);var $=a(26570);async function s(e){const t=e.getAttribute("data-file-id");const a=e.getAttribute("data-file-section-name");let i;let s=false;try{i=await o().post("/data-cleaning/trigger-cleaner",{file_id:t,file_section_name:a})}catch(e){s=true}if(i?.status===201&&!s){(0,n.f)($.__("Data cleaning has begun for this file. The data cleaner will be available shortly."),"success")}else if(i?.status===204&&!s){(0,n.f)($.__("Sorry, this file isn't a valid file to be cleaned."),"error")}else{(0,n.f)($.__("Sorry, something went wrong"),"error")}}},64305:(e,t,a)=>{a.d(t,{T:()=>p,fX:()=>m,u5:()=>u,ur:()=>f});var n=a(89835);var i=a(23321);var o=a.n(i);var s=a(56445);var l=a.n(s);var r=a(38058);var d=a(17842);var c=a.n(d);var $=a(26570);function f(e,t,a){a=a=="stacked";t=t?t:false;let n=$.__("Unshare");if(t==="share"){n=$.__("Share")}const i="/ajax/dialog/"+appPrefix+"employee_files/unshare_file.php?share="+t+"&id="+e;(0,r.QK)(a,true,{isLoading:true});c().get(i).then((e=>{let{data:t}=e;const o={alternativeAction:()=>{(0,r.QK)(a,false)},dangerousContent:t,isLoading:false,primaryAction:()=>{$.post(i,$("#shareForm").serialize(),(function(e){if(e.ret=="SAVED"){(0,r.QK)(a,false);setMessage(e.message,"success");loadSectionFiles(e.section_id,$("select[name=sort-files]").val())}}),"json")},primaryActionText:n,secondaryAction:null,title:n,type:a?"smallSheet":"small"};(0,r.QK)(a,true,o)}));return false}function u(e,t){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";const i=$("tr[data-file_id="+e+"]");const o=i.data("filename")||a;const l="/ajax/"+appPrefix+"files/share_file.php?id="+e;function d(e){if($(e).find("tr.allEmployeesRow").length>0){$("input#allEmployees").attr("checked","checked");$("#shareInput input").attr("disabled","disabled");$(".shareListInputLabel").addClass("disabled");$("#shareInput").addClass("disabled")}else{$("#shareInput input").attr("disabled",null);$(".shareListInputLabel").removeClass("disabled");$("#shareInput").removeClass("disabled")}}(0,r.QK)(false,true,{isLoading:true});c().get(l).then((a=>{let{data:i}=a;let c=document.createElement("div");c.innerHTML=i;const f=$(c).find(".js-footerContent").remove().html();const u=()=>{window.BambooHR.Modal.setState({isProcessing:true},true);$.post(l,$("form#shareForm").serialize(),(function(t){if(t.success){if(t.shared=="shared"){$(".js-fileRow[data-file_id="+e+"] .js-sharedData").removeClass("hidden")}else{$(".js-fileRow[data-file_id="+e+"] .js-sharedData").addClass("hidden")}window.BambooHR.Modal.setState({isProcessing:false},true);(0,r.QK)(false,false);if(t.msg!==""){setMessage(t.msg,"success")}}else{window.BambooHR.Modal.setState({isProcessing:false},true);setMessage(t.error,"error")}}),"json")};const p={alternativeAction:()=>{(0,r.QK)(false,false)},contentHasPadding:(0,s.ifFeature)("encore",true,false),dangerousContent:c,footer:(0,n.Z)("div",{className:"js-footerOptions fileModalFooterOptions"}),headline:null,icon:null,isLoading:false,onClose:()=>{(0,r.QK)(false,false)},onOpen:()=>{const t=$(".js-footerOptions");t.html(f);$("#sharedWith",".sharedFileTableWrapper").load("/ajax/"+appPrefix+"files/shared_with.php?id="+e+"&type=file",{},(function(){d(this)}));t.find('input[name="name"]').on("keyup",(function(){if($(this).val()!==""){$(".ui-button.create").button("enable")}}));t.find("input#allEmployees").on("change",(function(){const t={action:"share",allEmployees:this.checked?"on":"off"};$.post("/ajax/"+appPrefix+"files/share_file.php?id="+e,t,(function(t){if(t.success){$("#sharedWith").load("/ajax/"+appPrefix+"files/shared_with.php?id="+e+"&type=file",{},(function(){d(this)}));$(".input-list .item").remove();$(".cancel-option").remove();$(".input-list .description").show().next(".inputs").hide();$(".input-list.shown").removeClass("shown");$("#notifyLabel").hide();if(t.shared=="shared"){$(".js-fileRow[data-file_id="+e+"] .js-sharedData").removeClass("hidden")}else{$(".js-fileRow[data-file_id="+e+"] .js-sharedData").addClass("hidden")}const a={primaryAction:()=>{(0,r.QK)(false,false)},primaryActionText:$.__("Done")};(0,r.QK)(false,true,a);if(t.msg!==""){setMessage(t.msg,"success")}}else{setMessage(t.error,"error")}}),"json")}));(0,r.pS)(t.selector);t.find(".input-list").addClass("fab-TextInput fab-TextInput--width100");$(".js-autoListInput",t).click((()=>{if(t.find("input#allEmployees").attr("checked")||$("#shareInput .item").length>0){return}(0,r.QK)(false,true,{primaryActionText:p.primaryActionText,primaryAction:u})}))},primaryAction:()=>(0,r.QK)(false,false),primaryActionText:$.__("Done"),secondaryAction:null,title:$.__("Share %1",o),type:t?"smallSheet":"small"};(0,r.QK)(false,true,p);p.onOpen()}))}function p(e,t){let a={};const i=$("#shareFileSectionTemplate").tmpl(a);function o(e){if($(e).find("tr.allEmployeesRow").length>0){$("input#allEmployees").attr("checked","checked");$("#shareInput input").attr("disabled","disabled");$(".shareListInputLabel").addClass("disabled");$("#shareInput").addClass("disabled")}else{$("#shareInput input").attr("disabled",null);$(".shareListInputLabel").removeClass("disabled");$("#shareInput").removeClass("disabled")}}let l=document.createElement("div");l.innerHTML=i.html();const d=$(l).find(".js-footerContent").remove().html();const c=()=>{window.BambooHR.Modal.setState({isProcessing:true},true);$.post("/ajax/"+appPrefix+"files/share_folder.php?id="+e,$("form#shareForm").serialize(),(function(t){if(t.success){if(t.shared===true){$(".js-FileFolder[data-section_id="+e+"]").parent().addClass("shared")}else{$(".js-FileFolder[data-section_id="+e+"]").parent().removeClass("shared")}window.BambooHR.Modal.setState({isOpen:false});if(t.msg!==""){setMessage(t.msg,"success")}}else{window.BambooHR.Modal.setState({isProcessing:false},true);setMessage(t.error,"error")}}),"json")};const f=$.__("Share");window.BambooHR.Modal.setState({contentHasPadding:(0,s.ifFeature)("encore",true,false),dangerousContent:l,footer:(0,n.Z)("div",{className:"js-footerOptions fileModalFooterOptions"}),onClose:()=>{window.BambooHR.Modal.setState({isOpen:false})},onOpen:()=>{const t=$(".js-footerOptions");t.html(d);$("#sharedWith","#fabricModalContent").load("/ajax/"+appPrefix+"files/shared_with.php?id="+e+"&type=folder",{},(function(){o(this)}));t.find("input#allEmployees").on("change",(function(){const t={action:"share",all_employees:this.checked?"true":"false"};$.post("/ajax/"+appPrefix+"files/share_folder.php?id="+e,t,(function(t){if(t.success){$("#sharedWith").load("/ajax/"+appPrefix+"files/shared_with.php?id="+e+"&type=folder",{},(function(){o(this)}));$(".input-list .item").remove();$(".cancel-option").remove();$(".input-list .description").show().next(".inputs").hide();$(".input-list.shown").removeClass("shown");$("#notifyLabel").hide();if(t.shared===true){$(".js-FileFolder[data-section_id="+e+"]").parent().addClass("shared")}else{$(".js-FileFolder[data-section_id="+e+"]").parent().removeClass("shared")}window.BambooHR.Modal.setState({primaryActionText:$.__("Done"),primaryAction:()=>{window.BambooHR.Modal.setState({isOpen:false})}},true);if(t.msg!==""){setMessage(t.msg,"success")}}else{setMessage(t.error,"error")}}),"json")}));(0,r.pS)(t.selector);t.find(".input-list").addClass("fab-TextInput fab-TextInput--width100");$(".js-autoListInput",t).click((()=>{if(t.find("input#allEmployees").attr("checked")||$("#shareInput .item").length>0){return}window.BambooHR.Modal.setState({primaryActionText:f,primaryAction:c},true)}))},primaryAction:null,primaryActionText:f,isOpen:true,title:$.__("Share %1 Folder",t)})}function m(e,t,a,n,i){if(e=="file"){$.post("/ajax/"+appPrefix+"files/share_file.php?id="+t,{action:"unshare",type:a,shareId:n},(function(e){if(e.success){if(e.shared=="shared"){$("tr[data-file_id="+t+"]").find("span.shared.icon").show()}else{$("tr[data-file_id="+t+"]").find("span.shared.icon").hide()}i.remove();if(a=="all_employees"){$("#allEmployees").removeAttr("checked");$("#shareInput input").attr("disabled",null);$(".shareListInputLabel").removeClass("disabled");$("#shareInput").removeClass("disabled")}}else{setMessage(e.error,"error")}}),"json")}else if(e=="folder"){$.post("/ajax/"+appPrefix+"files/share_folder.php?id="+t,{action:"unshare",type:a,shareId:n},(function(e){if(e.success){if(e.shared===true){$("li[data-section_id="+t+"]").addClass("shared")}else{$("li[data-section_id="+t+"]").removeClass("shared")}i.remove();if(a=="all_employees"){$("#allEmployees").removeAttr("checked");$(".inputListWrapper .disabled").removeClass("disabled");$("#shareInput input").attr("disabled",null)}}else{setMessage(e.error,"error")}}),"json")}}},26582:(e,t,a)=>{a.d(t,{u:()=>h,w:()=>g});var n=a(89835);var i=a(23321);var o=a.n(i);var s=a(98853);var l=a.n(s);var r=a(38592);var d=a(77512);var c=a(1891);var f=a(72229);var u=a(90733);var p=a(64305);var m=a(63917);var $=a(26570);const h=e=>{const t=document.getElementById(`previewer-root`);if(t){(0,d.s)((0,n.Z)(c.x5,{fileId:e,onClose:()=>{const e=document.getElementById(`previewer-root`);if(e){l().unmountComponentAtNode(e)}},onFileInfoChange:()=>{const e=document.getElementById(`previewer-root`);if(e){l().unmountComponentAtNode(e)}},open:true,previewerMode:"EMPLOYEE",route:"/previewer"}),t)}};const g=(e,t,a,i)=>{let o=document.getElementById(`previewer-root-${e}`);if(!o&&i){o=document.getElementById(`previewer-root-duplicate`)}if(!o){const e=document.getElementById(`files-content`);const t=document.createElement("div");t.id=`previewer-root-hidden-file`;e?.appendChild(t);o=t}if(o){(0,d.s)((0,n.Z)(c.x5,{deleteCompanyFile:(e,t)=>(0,u.$G)(e,false,false,t),duplicateFile:(e,t,a)=>{window.lazySigs((n=>{(0,f.Ag)(n,e,t,a,"fab-file-esig-23x28")}))},emailFile:e=>(0,f.b)(e,false,false),esignatureTemplateId:t,fileId:e,FolderSelector:m.z,isDuplicate:!!i,isTemplating:a,onClose:()=>{const t=document.getElementById(`previewer-root-${e}`);if(t){l().unmountComponentAtNode(t)}},onFileInfoChange:()=>{window.location.href="/files"},reloadFileList:()=>(0,f.VL)(),renameFile:(e,t)=>(0,f.gQ)(e,false,false,t),route:"/e-signature-templating-previewer",requestSignatures:(e,t,a)=>{window.Files.SendSignatureRequest.openModal(e,$.__("Send Signature Request"),t,null,a,true)},shareFile:(e,t)=>(0,p.u5)(e,true,t),signatureSetup:(e,t,a,n,i)=>{window.lazySigs((o=>{const s=(0,r.getIconNameFromFileName)(a,"23x28",n);o.Setup.convertFile(e,t,a,s,i)}))},signatureSetupEdit:(e,t,a,n,i)=>{window.lazySigs((o=>{const s=()=>{i();o.init(o.TYPE_SETUP)};o.Setup.openModal(a,e,s,n,t,"fab-file-esig-23x28")}))},templatingExperienceUtilities:{modalIsOpen:window.BambooHR.Modal.isOpen,handleCloseTemplatingExperience:()=>window.BambooHR.Modal.setState({})}}),o)}}},78195:(e,t,a)=>{a.d(t,{CX:()=>m,DG:()=>h,N2:()=>f,v4:()=>p,ws:()=>u});var n=a(89835);var i=a(23321);var o=a.n(i);var s=a(20928);var l=a(38058);var r=a(393);var d=a(92544);var c=a(41810);var $=a(26570);function f(e,t,a){let n=[];t.each((function(e,t){n.push($(t).data("file_id"))}));let i="/ajax/files/edit_folder.php?id="+e;let o={action:"addFile",fileIds:n};if(a){$("li.sectionLink[data-section_id="+e+"]").addClass("selected");i="/employees/ajax/folder/moveFiles/"+window.currentlyEditingEmployeeId;o={id:e,fileIds:n}}$.post(i,o,(function(e){if(e.success){let t=$("li.sectionLink.selected");if(t.length){t.each((function(){const e=$(this).find(".js-FileFolder").data("section_id");$("#files-table-wrapper .js-FilesTable").children().remove();loadSectionFiles(e,$("select[name=sort-files]").val(),null,true)}))}else{loadSectionFiles("all",$("select[name=sort-files]",null,true).val());$("#file-sections .sectionLink.all").addClass("selected")}$("li.sectionLink").each((function(){let t=0;const a=$(this).find(".js-FileFolder").data("section_id");if(a&&e.sectionCounts[a]){t=e.sectionCounts[a]}$(this).find("span.count").html("("+t+")")}))}else{window.setMessage(e.error,"error")}}),"json")}function u(){if(!$("li.sectionLink:not(.all)").length>0){return(0,s.tb)(null,"first")}const e=$("#uploadFilesFooterDialog").tmpl();const t=$(".sectionLink.selected .js-FileFolder").data("section_id");let a=$("li.js-canUpload");const n=$("#uploadFilesDialog").html();const i="#modal-dialog";const o="#fabricModalContent";let l=e.find('ba-select[name="fileSection"]');g(l,a,t);v(n,e.html(),(()=>{let e=$(".shareForm select[name=fileSection]").val();let t=$(".employeeFolderSelection");if(t.length>0){e=t.data("sectionId")}if(!e){setMessage($.__("Please select a folder."),"error");return false}window.BambooHR.Modal.setState({isProcessing:true},true);a=$("#shareInput :input, #shareInput ba-select").serializeArray();$.merge(a,$(o+" :input[name^=attachId]").add(o+" ba-select[name^=attachId]").serializeArray());a.push({name:"action",value:"upload"},{name:"fileSection",value:e},{name:"share",value:$("#allEmployees").is(":checked")});$.ajax({url:"/ajax/"+appPrefix+"files/edit_file.php",type:"post",data:a,success:function(t){if(t.success){(0,s.l3)();offset=0;doneLoading=false;loadSectionFiles(e,$("ba-select[name=sort-files]").val());$(".sectionLink").removeClass("selected");$('[data-section_id="'+e+'"]').parent(".js-fileFolderWrapper").addClass("selected");setMessage(t.success_message,"success");$(".uploadDesc").show();window.BambooHR.Modal.setState({isOpen:false})}else{setMessage(t.error,"error");window.BambooHR.Modal.setState({isProcessing:false},true)}},dataType:"json"})}));$(".uploadDesc").show();$("#allEmployees").on("click",(function(){if($(this).is(":checked")){$(".shareListInputLabel:not(.folderLabel), #shareInput input, #shareInput").addClass("disabled").attr("disabled","disabled")}else{$(".shareListInputLabel:not(.folderLabel), #shareInput input, #shareInput").removeClass("disabled").attr("disabled",null)}}))}function p(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return false}if(!t&&!$("li.sectionLink:not(.all)").length>0){return(0,s.tb)(null,"first",true,e)}const a=$("#uploadFilesFooterDialog").tmpl();const n=$(".sectionLink.selected").data("section_id");let i=$("li.sectionLink.droppable:not(.all)");const o=$("#uploadFilesDialog").html();const l="#modal-dialog";const r="#fabricModalContent";const d=a.find('ba-select[name="employeeFileSection"]');g(d,i,n,true);v(o,a.html(),(()=>{let a=$(".shareForm select[name=employeeFileSection]").val();let n=$(".employeeFolderSelection");if(n.length>0){a=n.data("sectionId")}if(!a){setMessage($.__("Please select a folder."),"error");return false}window.BambooHR.Modal.setState({isProcessing:true},true);i=$(r+" :input[name^=attachId]").add(r+" ba-select[name^=attachId]").serializeArray();i.push({name:"action",value:"upload"},{name:"employeeId",value:e},{name:"employeeFileSection",value:a},{name:"share",value:$("#shareWithEmployee").is(":checked")});if(t){i.push({name:"isEmployeeDocumentUpload",value:t})}$.ajax({url:"/ajax/"+appPrefix+"employees/files/edit_file.php",type:"post",data:i,success:function(t){window.BambooHR.Modal.setState({isProcessing:false},true);if(t.success){(0,s.l3)(e);$("li.sectionLink[data-section_id="+a+"]").addClass("selected");loadSectionFiles(a,$("select[name=sort-files]").val());setMessage(t.success_message,"success");$(".uploadDesc").show();window.BambooHR.Modal.setState({isOpen:false})}else{setMessage(t.error,"error")}},dataType:"json"})}));$(".uploadDesc").show();$(l+" input[name^=attachId]").each((function(){$(this).remove()}));$(".ui-dialog-buttonset .ui-button").button("disable")}function m(e){window.BambooHR.Modal.setState({primaryAction(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++){a[n]=arguments[n]}(0,d.e8)({isSheet:true}).then((()=>e(...a)))}},true)}function h(e,t){if(e==="enable"){let e=$(".js-uploadFolderSelect");if(e.length===0){m(t)}$(".js-disableShare").attr("disabled",null);$(".js-dummyInput").addClass("hidden");$("label.js-disableShare").removeClass("disabled");$(".js-autoInputListContainer").removeClass("hidden")}else{window.BambooHR.Modal.setState({primaryAction:false},true);$(".js-disableShare").attr("disabled",true);$("label.js-disableShare").addClass("disabled");$(".js-autoInputListContainer").addClass("hidden");$(".js-dummyInput").removeClass("hidden")}}function g(e,t,a,n){if(e.length>0){e.children().remove();for(let a=0;a<t.length;a++){const n=$(t[a]).find(".js-FileFolder");let i=document.createElement("ba-option");i.textContent=n.attr("data-foldername");i.setAttribute("value",n.attr("data-section_id"));if(n.parent().hasClass("selected")){i.setAttribute("selected",true)}e.append(i)}if(a==="all"){e.find("ba-option").each((function(){$(this).removeAttr("selected")}))}else{e.find("ba-option").each((function(){if(parseInt($(this).attr("value"))===a){$(this).attr("selected","selected")}else{$(this).removeAttr("selected")}}))}}}function v(e,t,a){const i="#fabricModalContent";const o="#fabricModalFooterContent";const s=window.Employee?(0,n.Z)(r.Z,{imageAlt:"Image of employee",imageSrc:window.Employee.photoURL,subTitle:window.Employee.jobTitle,title:window.Employee.preferredName+" "+window.Employee.lastName}):null;let d=$(".js-uploadFolderSelect");window.BambooHR.Modal.setState({biId:"files-upload",contentHasPadding:true,dangerousContent:'<div id="js-uploadFilesContent">'+e+"</div>",footer:(0,n.Z)("div",{className:"FileModalShareOptionsWrapper js-shareOptionsWrapper",id:"fabricModalFooterContent"}),header:s,onClose:()=>{d.off("ba:selectChange");h("disable")},onOpen:()=>{$("#js-uploadFilesContent").find("form.shareForm").prop("name","fileUploadForm").prop("id","fileUploadForm");const e=$(".js-shareOptionsWrapper");e.html(t);d=e.find(".js-uploadFolderSelect");d.on("ba:selectChange",(function(e){if(e.originalEvent.detail.value){m(a)}}));$(".FileUploadActions").addClass("centerContent");let n=$(".multiUpload");let s={linkHTML:`<span class="attach-link">\n\t\t\t\t\t\t\t\t\t<button data-bi-id="files-upload-choose-file" class="fab-Button fab-Button--secondary fab-Button--noSpace js-chooseFile" type="button">`+$.__("Choose File(s)")+` </button>\n\t\t\t\t\t\t\t\t\t<button class="files-add-file fab-TextButton fab-link" type="button"\n\t\t\t\t\t\t\t\t\t        style="display: none;"> + `+$.__("Add a file")+` </button>\n\t\t\t\t\t\t\t\t</span>`,success:function(e,t){$(".noFile",n).hide();let i=$(".attach-wrapper",n).closest("form");i.append('<input type="hidden" name="attachId[]" data-name="'+e.name+'" data-type="'+e.type+'" data-size="'+e.size+'" data-image="'+e.image+'" value="'+e.fid+'">');let o=$(".js-uploadFolderSelect");h("enable");if(o.length===0||o.val()){m(a)}},removeFile:function(e){let t=e.attr("id").replace("file-","");if(e.hasClass("uploadDone")){$(`input[name^=attachId][value='`+t+`']`).remove()}if((0,c.Iw)(n)){h("disable")}return true},onRemove:function(){if((0,c.Iw)(n)){h("disable")}},createFileWrapper:function(e,t){$(".noFile",n).hide();if($(".files > *",n).length===0){$(".attach-link button, .uploadDesc",n).toggle();(0,c.TZ)(n,false)}return $.fileUploader.createFileWrapper(e,t)},setDragOverValues:function(e){setTimeout((function(){e.addClass("dragOver").find(".upload-msg").text($.__("Upload Files"))}))},setDragOffValues:function(){$(".dragOver").find(".upload-msg").text($.__("Drop Files Here to Upload"));$(".dragOver").removeClass("dragOver")},uploaderId:"multiUpload"};$((function(){$(".attach-wrapper",n).closest(i).fileUploader(s)}));$(i+" input[name^=attachId]").each((function(){$(this).remove()}));h("disable");(0,l.pS)(o)},primaryAction:null,primaryActionText:$.__("Upload"),isOpen:true,title:$.__("Upload Files")})}},72229:(e,t,a)=>{a.d(t,{Ag:()=>I,Eu:()=>j,KG:()=>A,Lk:()=>T,NC:()=>C,NR:()=>b,RT:()=>E,VL:()=>F,ZU:()=>y,b:()=>x,gQ:()=>M,sK:()=>D,td:()=>S,vd:()=>P});var n=a(89835);var i=a(23321);var o=a.n(i);var s=a(56445);var l=a.n(s);var r=a(26582);var d=a(38058);var c=a(78144);var f=a(38592);var u=a(17842);var p=a.n(u);var m=a(28294);var h=a(71141);var g=a(59155);var v=a.n(g);var w=a(77512);var $=a(26570);function b(e,t){if(empty(e)){setMessage($.__(`We don't know how to open that file`),"error");return}(0,r.w)(e,t)}function y(e,t,a,n){if(window.ASSUMED_USER){window.disabledForPermsTest();return}const i=Boolean(n);const o=(0,f.getIconNameFromFileName)(a,"23x28",i);if((0,h.isEnabled)("ESIGNATURE_TEMPLATING_UPDATE")){(0,r.w)(e,n,true);return}if(i){window.lazySigs((function(i){window.BambooHR.Modal.setState({isLoading:true,isOpen:true});i.Setup.openModal(n,e,"Esignatures.init(Esignatures.TYPE_SETUP)",a,t,o)}))}else{window.lazySigs((function(n){n.Setup.convertFile(e,t,a,o)}))}}function x(e,t,a){let i=t?"/ajax/"+appPrefix+"employees/files/email_file.php":"/ajax/"+appPrefix+"files/email_file.php";i+="?id="+e;const o=!BambooHR.Utils.canEmailFilesAndReports();(0,d.QK)(a,true,{isLoading:true});u.ajax.get(i).then((e=>{const s=()=>{$("#emailFileForm .input-list").autoInputList({autocompleteUrl:"/ajax/"+appPrefix+"files/quicksearch-email.php",description:$.__("Enter email addresses..."),formatAutoItem:activeIndicator,formatTagItem:function(e,t,a){if(t){$(`<span class="item">`+xmlEntities(t[0])+`\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="ids[]" value='`+t[1]+`' />\n\t\t\t\t\t\t\t\t\t<button class="remove fab-FloatingIconButton fab-FloatingIconButton--teenie fab-FloatingIconButton--secondary" type="button">\n\t\t\t\t\t\t\t\t\t\t<span class="fab-FloatingIconButton__icon"><ba-icon name="fab-x-10x10"></ba-icon></span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</span>`).insertBefore(".input-list span.input");$(this).val("");$(document).on("click",".item .remove",(function(){$(this).closest("span.item").remove();return false}))}}});$("#emailFileForm .input-list .free").addClass("fab-TextInput fab-TextInput--width100");const e=$.__("Enter email addresses...");$(".free").click().focus().attr("placeholder",e);$("#emailFileForm").on("focus",".input-list .free",(function(){$("#emailFileForm .input-list").addClass("focused");$("#emailTo").removeClass("error")})).on("blur",".input-list .free",(function(){$("#emailFileForm .input-list").removeClass("focused")}));$("#emailFileForm .input-list .description").bind("click.autoInit.bhr",(function(){$(".description").hide().unbind("click.autoInit.bhr").next(".inputs").show();$("#emailFileForm .free").focus()}))};const l={alternativeAction:()=>{(0,d.QK)(a,false)},contentHasPadding:true,dangerousContent:e.data,footer:o?(0,n.Z)("span",{},void 0,$.__("Note: Emailing is disabled while in trial.")):"",headline:null,icon:null,isLoading:false,onClose:()=>{(0,d.QK)(a,false)},primaryAction:o?null:()=>{if($('form#emailFileForm input[name="ids[]"]').length===0){$("#emailFileForm .js-emailFileFormRecipients").addClass("fab-Label--error");return}(0,d.QK)(a,true,{isProcessing:true});$.post(i,$("form#emailFileForm").serialize(),(function(e){if(e.success){setMessage(e.success_message,"success");(0,d.QK)(a,false)}else{(0,d.QK)(a,true,{isProcessing:false})}}),"json")},primaryActionText:$.__("Send"),secondaryAction:null,title:$.__("Email This File"),type:a||!t?"smallSheet":"small"};(0,d.QK)(a,true,l);s()}))}function S(e,t,a,n){C(e,t,a,true,n)}function C(e,t,a,i,o,l,u){let p=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;let v=arguments.length>8&&arguments[8]!==undefined?arguments[8]:false;let b=arguments.length>9&&arguments[9]!==undefined?arguments[9]:null;let y=arguments.length>10&&arguments[10]!==undefined?arguments[10]:false;if(empty(t)){setMessage($.__(`We don't know how to open that file`),"error");return}if((0,h.isEnabled)("ESIGNATURE_TEMPLATING_UPDATE")&&!i&&y){(0,r.w)(t,b);return}const x=window.ASSUMED_USER?`\n\t<div id="previewDialog" class="pdfjsViewer isPreviewUser" dir="ltr">\n\t\t<div id="documentContainer"></div>\n\t\t<div id="documentOptions"></div>\n\t</div>`:`\n\t\t<div id="previewDialog" class="pdfjsViewer" dir="ltr">\n\t\t\t<div id="documentContainer"></div>\n\t\t\t<div id="documentOptions" class="fab-Card"></div>\n\t\t</div>`;i=i||false;l=l||false;if(typeof o==="undefined"||o===""||o===null){o="tr"}const S=$(`${o}[data-file_id="${t}"]`);const C=a||S.data("filename");const F=u||S.data("filemode");const I=(0,c.Ho)(C);const M=S.data("is-esig");let E;function T(){if(window.printPDFInfo&&window.clearPrintFile){window.clearPrintFile(window.printPDFInfo);window.printPDFInfo=null}}function A(){$(document).trigger("filepreviewer:close:before");if(window.webViewerDestroy){window.webViewerDestroy()}clearTimeout(E)}function P(){$(document).trigger("filepreviewer:close:after");T();if(window.BambooHR.Modal.isOpen){window.BambooHR.Modal.setState({isOpen:false})}}function j(){$(document).trigger("filepreviewer:open:before")}function D(){const a=$("#previewDialog"),o=a.find("#documentContainer"),s=a.find("#documentOptions");a.removeClass("noSidebar noPreview");if(l){s.hide();a.find(".branded-icon").hide();a.addClass("noSidebar")}if(F=="img"){window.BambooHR.Modal.setState({isLoading:false},true);const t=$('<div class="documentImage"></div>');o.append('<div id="loadingMsg">'+$.__("Loading Image...")+'<img class="loader" src="/images/setup/ajax-loader.gif"/>');(0,w.s)((0,n.Z)(g.Loader,{small:true}),document.getElementById("loadingMsg"));o.find("#noPreviewMsg").remove();o.find("img.img-preview").remove();o.append(t);t.html('<img onload="showImage(this)" class="img-preview" src="/ajax/'+appPrefix+"fetcher.php?doc="+e+"&format=img"+(i?"&employee=true":"")+'"/></div>')}else{o.find("#noPreviewMsg").remove();o.find("#loadingMsg").remove();o.find("img.img-preview").remove();o.append('<div id="loadingMsg">'+$.__("Loading Preview...")+'<img class="loader" src="/images/setup/ajax-loader.gif"/></div>');(0,w.s)((0,n.Z)(g.Loader,{small:true}),document.getElementById("loadingMsg"));let a="/"+(appPrefix?appPrefix:"")+"files/download.php?id="+t;let s="/ajax/"+appPrefix+"file_preview_status.php?v="+e;if(i==true){a="/"+(appPrefix?appPrefix:"")+"employees/files/download.php?id="+t;s="/ajax/"+appPrefix+"file_preview_status.php?v="+e+"&employee=true"}if(p){}if(appPrefix==="offer_letter/"){a=`/applicant_tracking/download_attachment?id=${t}`}window.downloadPdfjsFile=function(){window.location.href=a};let l=0;const r=function(){l++;$.get(s+(l>1?"&status-only":""),(function(e,t,n){const i=n.getResponseHeader("x-bamboohr-error-message");if(i){window.setMessage(i,"error");P();return false}window.BambooHR.Modal.setState({isLoading:false},true);if(e.res==="yes"){c()}else if(e.res==="failed"){if(e.s3==="yes"){o.html((0,d.ZC)({fabIcon:"fab-file-sad-100x120",icon:"file-sad.png",title:$.__("Sorry, we can’t provide a preview for this file."),subText:$.__("You can always download and view it on your computer."),fileUrl:a}));o.find("#loadingMsg").remove()}else{o.html((0,d.ZC)({icon:"file-hourglass.png",title:$.__("We are working on generating a preview for this file. Please check back later."),subText:$.__("You can always download and view it on your computer."),fileUrl:a}));o.find("#loadingMsg").remove()}}else if(e.error&&e.error=="missing file data"){o.html((0,d.ZC)({fabIcon:"fab-file-sad-100x120",icon:"file-sad.png",title:$.__("There was a problem uploading this file."),subText:$.__("This file could not be processed, try uploading it again.")}));o.find("#loadingMsg").remove()}else if(e.error&&e.error==="archived"){$(".js-simplemodal-title").text($.__("This file is gone"));$(".js-simplemodal-button-primary").text($.__("Close"));o.html((0,d.ZC)({icon:"file-dinosaur.png",title:$.__("Sorry, this doesn't exist anymore."),subText:$.__("Talk to your HR Administrator to see if they can dig it up.")}));o.find("#loadingMsg").remove()}else if(l<3){E=setTimeout(r,2e3*Math.min(l,5))}else{o.html((0,d.ZC)({fabIcon:"fab-file-sad-100x120",icon:"file-sad.png",title:$.__("Sorry, we can’t provide a preview for this file."),subText:$.__("You can always download and view it on your computer."),fileUrl:a}));o.find("#loadingMsg").remove()}}),"json").fail((function(e,t,a){console.log("why?");console.log(e);console.log(t);console.log(a)}))};r()}if(!l){let e="/ajax/"+appPrefix+"files/previewer_sidebar.php?id="+t;if(i){e+="&employee_file=true"}if(p){}$.get(e,(function(e){if(e.success){s.show().css("opacity",0).html(e.html).velocity({opacity:1},{duration:150})}}),"json")}function r(e){let t="/ajax/"+appPrefix+"fetcher.php?doc="+e+"&format=pdf";if(i){t+="&employee=true"}if(p){}return t}function c(){(0,m.Z)("/ajax/"+appPrefix+"files/previewer/load_html.php/previewerHtml",r(e),o)}}j();window.BambooHR.Modal.setState({alternativeAction:null,contentHasPadding:(0,s.ifFeature)("encore",true,false),dangerousContent:x,header:(0,n.Z)("div",{className:"filePreviewModalHeader"},void 0,(0,n.Z)("h2",{className:"filePreviewModalHeader__title mobileHide"},void 0,(0,s.ifFeature)("encore",undefined,(0,n.Z)("span",{className:"filePreviewModalHeader__icon"},void 0,(0,n.Z)("ba-icon",{name:(0,f.getIconNameFromFileName)(I,"23x28",M)}))),I),(0,n.Z)("h3",{className:"filePreviewModalHeader__title hidden mobileOnly mobileOnly--block"},void 0,(0,s.ifFeature)("encore",undefined,(0,n.Z)("span",{className:"filePreviewModalHeader__icon"},void 0,(0,n.Z)("ba-icon",{name:(0,f.getIconNameFromFileName)(I,"20x24")}))),I)),isHeadless:true,isLoading:true,isOpen:true,onClose:P,onOpen:D,primaryAction:()=>{A();T();window.BambooHR.Modal.setState({isOpen:false})},primaryActionKey:null,primaryActionText:$.__("Close"),type:"fullScreen"});if(v){D()}}function F(){window.resetFiles();window.loadSectionFiles($(".sectionLink.selected .js-FileFolder").data("section_id"),$("select[name=sort-files]").val())}function I(e,t,a,n,i){if(window.GLOBAL_IS_ASSUMED_USER){return window.disabledForPermsTest()}if(t){e.Setup.disableSidebarButtons();if((0,h.isEnabled)("ESIGNATURE_TEMPLATING_UPDATE")){u.ajax.post(`/esignature_templates/${t}/duplicate`).then((e=>{if(e.status==200&&e?.data?.meta?.files&&e.data.meta.files.length>0){const t=e.data.meta.files[0].id;const a=e.data.result?.template?.id;(0,r.w)(t,a,true,true)}else{setMessage(e?.error?e.error:$.__("Uh-oh. Something went wrong, please try again!"),"error")}})).catch((function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{response:{data:{error:{message:t=$.__("Uh-oh. Something went wrong, please try again!")}={}}={}}={}}=e;console.error(e);setMessage(t,"error")}))}else{u.ajax.post(`/esignatures/template/${t}/duplicate`).then((t=>{const{data:{newFileId:o,newFileName:s}={}}=t;if(o){const t=s?s:$.__("%1$s - Copy",a);const l=()=>{e.init(e.TYPE_SETUP);setMessage($.__("Done! You are now editing the duplicated copy."),"success");window.resetFiles();window.loadSectionFiles($(".sectionLink.selected .js-FileFolder").data("section_id"),$("select[name=sort-files]").val())};e.Setup.openModal(0,o,l,t,n,i,true)}else{window.BambooHR.Modal.setState({isOpen:false,isProcessing:false});setMessage(t?.error?t.error:$.__("Uh-oh. Something went wrong, please try again!"),"error")}})).catch((function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{response:{data:{error:{message:t=$.__("Uh-oh. Something went wrong, please try again!")}={}}={}}={}}=e;console.error(e);window.BambooHR.Modal.setState({isOpen:false,isProcessing:false});setMessage(t,"error")}))}}}function M(e,t,a,n){const i=$(`[data-file_id="${e}"], [data-file-id="${e}"]`);const o=i.data("filename")||i.data("fileName")||n||"";const s=(0,c.Ho)(o);const l={name:s,fclass:`filetype-${(0,f.getFileTypeFromExt)(s)}`};const r=t?`/ajax/${appPrefix}employees/files/rename_file.php`:`/${appPrefix}files/rename_file`;(0,d.QK)(a,true,{isLoading:true});u.ajax.get(`${r}?${$.param(l)}`).then((n=>{const i={alternativeAction:()=>{(0,d.QK)(a,false)},contentHasPadding:true,dangerousContent:n.data,footer:null,headline:null,icon:null,isLoading:false,onOpen:()=>{$("#fileName").select().focus()},onClose:()=>{(0,d.QK)(a,false)},primaryAction:()=>{const t=$(".js-renameInput").val();if(t===""){setMessage($.__("Please enter a name for this file."),"error")}else{$.ajax({url:r,type:"post",data:{id:e,name:t},success:function(n){if(n.success){setMessage(n.success_message,"success");let i={isOpen:false};if(a){i={title:t,sheetProps:{isOpen:false}}}(0,d.QK)(a,false,i);const s=window.renameFileSuccess||E;s(e,t,o)}else{setMessage(n.error,"error")}},dataType:"json"})}},primaryActionKey:"Enter",primaryActionText:$.__("Rename File"),secondaryAction:false,title:$.__("Rename File"),type:a||!t?"smallSheet":"small"};(0,d.QK)(a,true,i)}))}function E(e,t){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";const i=window.js(t);const o=$(`tr[data-file_id=${e}]`);const s=o.data("is-esig");o.find(".js-fileName").text(t);o.data("filename",t);const l=$(".file-wrapper, .FileWrapper, .FileUploadsEmployee__File");let r=l.filter(`[id="file-${e}"], [id="${e}"], [data-fileid="${e}"]`);if(r.length===0){r=l.find(`[data-file-id="${e}"]`)}const d=r.find(".js-FileWrapper__FileLink, .js-Comment__fileName, .js-Comment__fileName-link");const c=d.find(".FileName__Text, > span");const u=r.find("ba-icon.FileType__icon");c.text(t);d.attr("data-file-name",i);d.data("fileName",t);if(d.length>0&&d[0].hasAttribute("onclick")){d.attr("onclick",d.attr("onclick").replace(a,i))}u.attr("name",(0,f.getIconNameFromFileName)(t,"16x20"));window.BambooHR.Modal.setState({header:(0,n.Z)("div",{className:"filePreviewModalHeader"},void 0,(0,n.Z)("h2",{className:"filePreviewModalHeader__title"},void 0,(0,n.Z)("span",{className:"filePreviewModalHeader__icon"},void 0,(0,n.Z)("ba-icon",{name:(0,f.getIconNameFromFileName)(t,"23x28",s)})),t))},true)}function T(e){if(!e){return}$.ajax({url:"/ajax/"+appPrefix+"file_status.php",data:{ids:e},dataType:"json",async:false,success:function(e){for(let t in e){const a=$("[data-file_id="+t+"]");if(e[t]=="uploaded"){a.attr("data-scanstatus","complete")}else if(e[t]=="virus"){a.attr("data-scanstatus","virus-detected").attr("data-fileimage","virus.png");a.find("td.file-icon img").attr("src","/images/files/types/virus.png").removeAttr("width").removeAttr("height");const e=$('[data-scanstatus="virus-detected"]').length;setMessage($.__n("Warning: One of these files has a virus.","Warning: Some of these files have a virus.",e),"info")}}if(fileScanTimeout<12e4){fileScanTimeout*=1.5;window.setTimeout((function(){A(fileScanTimeout)}),fileScanTimeout)}}})}function A(){let e=[];$("[data-scanstatus=scanning]").each((function(t){e.push($(this).data("file_id"))}));if(e.length){T(e.join(","))}}function P(e,t,a){j(e,t,a,true)}function j(e,t,a,i,o){if(typeof o==="undefined"||o===""){o="tr"}let s=`/${appPrefix||""}files/download.php?id=${t}`;if(i==true){s=`/${appPrefix||""}employees/files/download.php?id=${t}`}if(appPrefix==="offer_letter/"){s=`/applicant_tracking/download_attachment?id=${t}`}const l='<div id="previewDialog">'+'<div id="documentContainer">'+(0,d.ZC)({fabIcon:"fab-file-sad-100x120",icon:"file-sad.png",title:$.__("Sorry, we can’t provide a preview for this file."),subText:$.__("You can always download and view it on your computer."),fileUrl:s})+"</div>"+'<div class="branded-icon"></div>'+'<div id="documentOptions"></div>'+"</div>";const r=$(o+"[data-file_id="+t+"]");const c=$("#previewDialog");const u=c.find("#documentContainer");const p=a||r.data("filename");u.find("#noPreviewMsg").remove();u.find("#loadingMsg").remove();c.addClass("noPreview");function m(){let e="/ajax/"+appPrefix+"files/previewer_sidebar.php?id="+t;if(i){e+="&employee_file=true"}$.get(e,(function(e){if(e.success){$("#documentOptions").css("opacity",0).html(e.html).velocity({opacity:1},{duration:150})}}),"json")}window.BambooHR.Modal.setState({dangerousContent:l,header:(0,n.Z)("div",{className:"filePreviewModalHeader"},void 0,(0,n.Z)("h2",{className:"filePreviewModalHeader__title"},void 0,(0,n.Z)("span",{className:"filePreviewModalHeader__icon"},void 0,(0,n.Z)("ba-icon",{name:(0,f.getIconNameFromFileName)(p,"30x36")})),p)),isOpen:true,onOpen:m,primaryAction:()=>{window.BambooHR.Modal.setState({isOpen:false})},primaryActionText:$.__("Done"),type:"fullScreen"})}function D(e){$.get("/ajax/"+appPrefix+"files/no_access.php",{filename:e},(function(e){window.BambooHR.Modal.setState({dangerousContent:e,title:$.__("There's nothing to see here..."),isOpen:true,isLoading:false,primaryAction:()=>{window.BambooHR.Modal.setState({isOpen:false})},primaryActionText:$.__("Move Along"),alternativeActionText:""},true)}),"html").fail(errorFallBack)}},38058:(e,t,a)=>{a.d(t,{$Y:()=>f,QK:()=>d,ZC:()=>r,aU:()=>u,i8:()=>c,l3:()=>g,od:()=>m,pJ:()=>h,pS:()=>p,yB:()=>v});var n=a(8236);var i=a(73641);var o=a.n(i);var s=a(98675);var l=a(78195);var $=a(26570);function r(e){if(!e.hasOwnProperty("fabIcon")){e.fabIcon="unknown-0x0"}let t=`\n\t\t<div class="blankState no-line">\n\t\t\t<div class="blankState__image txtCenter">\n\t\t\t!* if (fabIcon) { *!\n\t\t\t\t<ba-icon name="!*= fabIcon *!" />\n\t\t\t!* } *!\n\t\t\t</div>\n\t\t\t<p class="title txtCenter">!*= title *!</p>\n\t\t\t<p class="blankState__subText txtCenter">!*= subText *!</p>\n\t\t\t!* if (typeof(fileUrl) != "undefined" && fileUrl != "") { *!\n\t\t\t\t<div class="footer">\n\t\t\t\t\t<a class="fab-Button fab-Button--outline fab-Button--small" target="_blank" rel="noopener noreferrer" href="!*= fileUrl *!"><span class="fab-Button__icon fab-Button__icon--left"><ba-icon name="fab-download-12x14"></ba-icon></span>!*= $.__('Download') *!</a>\n\t\t\t\t</div>\n\t\t\t!* } *!\n\t\t</div>\n\t`;return microTemplate(t,e)}function d(e,t,a){if(e){if(t){a.isOpen=t;window.BambooHR.Modal.setState({sheetProps:a},true)}else{window.BambooHR.Modal.setState({sheetProps:null},true)}}else if(t){if(window.BambooHR.Modal.isOpen()){window.BambooHR.Modal.setState(a,true)}else{a.isOpen=true;window.BambooHR.Modal.setState(a)}}else{window.BambooHR.Modal.setState({isOpen:false});(0,s.yI)()}}function c(){$(".ui-dialog-buttonset").find("button.processing").removeClass("processing disabled")}function f(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!$(".droppable").length){return}e.draggable({revert:true,revertDuration:350,helper:function(e,t){const a=$(".draggable.checked");const i=a.size();if(i>1){const e=(0,n.g)($.__n("Move %1 Document","Move %1 Documents",i),i);return $("<div class='dragMultiple'><img src='/images/files/files-drag.png'><span>"+e+"</span></div>")}if(!$(this).hasClass("checked")){$(this).addClass("checked");$(this).find("input[type=checkbox]").attr("checked","checked")}const o=$(this).clone();o.find(".file-checkbox").remove();o.find(".file-data p, .file-data span").hide();o.find(".file-options").remove();o.find(".file-icon img").css("height","20px").css("width","16px");o.css("width","auto").wrap("<div/>").removeClass("checked");return o},cancel:".js-not-draggable",cursorAt:{left:-1,top:-1},cursor:"pointer",...t})}function u(e,t){e.droppable({activeClass:"",hoverClass:"sectionLinkHover",tolerance:"pointer",drop:function(e,a){a.draggable.draggable("option","revert",false);const n=$("tr.checked");const i=$(this).find(".js-FileFolder");const o=i.data("section_id");if(o&&n.closest("li").data("section_id")!=o){const e=n.clone();$(".ui-draggable-dragging").remove();const a=o;if(i.attr("data-shared")=="yes"&&!t){const t=$("#addToSharedFolderTemplate").tmpl({});window.BambooHR.Modal.setState({dangerousContent:t.html(),primaryAction:()=>{(0,l.N2)(a,e);window.BambooHR.Modal.setState({isOpen:false})},primaryActionText:$.__("Add File to Shared Folder?"),isOpen:true,title:$.__("Create Shared File")})}else{(0,l.N2)(o,e,t)}}}})}function p(e){const t=e+" .input-list";$(t).autoInputList({autocompleteOptions:{highlight:BambooHR.Utils.highlightTermInMarkup},autocompleteUrl:"/quicksearch/share/file",description:$.__("Enter names or groups..."),formatAutoItem:qsWithPhoto,formatTagItem:function(t,a,n){if(a){$('<span class="item">'+a[0]+'<input type="hidden" name="ids['+a[1]+'][]" value="'+a[2]+'" />'+'<button class="js-removeItem removeItem fab-FloatingIconButton fab-FloatingIconButton--teenie fab-FloatingIconButton--secondary" type="button">'+'<span class="fab-FloatingIconButton__icon removeItemIcon"><ba-icon name="fab-x-10x10" encore-name="circle-x-solid" encore-size="16"></ba-icon></span></button></span>').insertBefore(".input-list span.input");$(this).val("");$(".input-list:not(.disabled)").on("click",".js-removeItem",(function(){$(this).closest("span.item").remove();$(".free",e).focus();return false}))}}}).focus((function(){$(".input-list:not(.disabled)",e).addClass("focus")})).blur((function(){$(".input-list",e).removeClass("focus")}));$(".free",e).addClass("fab-TextInput fab-TextInput--width100");$(".input-list:not(.disabled) .description",e).bind("click.autoInit.bhr",(function(){if($(e).find("input#allEmployees").attr("checked")){return}$(".input-list .description",e).hide().next(".inputs").show();$(".input-list",e).addClass("shown");$(".free",e).focus();$(".js-simplemodal-button-primary, .ui-dialog-buttonset .btn span.ui-button-text").text($.__("Share"));const t=$('<span class="cancel-option"><a href="#">'+$.__("Cancel")+"</a></span>");if($(".js-simplemodal-cancel").length){$(".js-simplemodal-cancel").show()}else if(!$(".ui-dialog-buttonset > .cancel-option").length){$(".ui-dialog-buttonset .btn").after(t)}$(".js-simplemodal-cancel, .ui-dialog-buttonset .cancel-option").click((function(){$(".inputs .item").remove();$(".js-simplemodal-button-primary, .ui-dialog-buttonset .btn span.ui-button-text").text($.__("Done"));$("#notifyLabel").hide();$(".input-list.shown").removeClass("shown");$(".input-list .description").show().next(".inputs").hide();if($(this).hasClass("cancel-option")){$(this).remove()}else{$(this).hide()}return false}))}));$(".input-list:not(.disabled)").click((function(){$(".free").focus()}));const a=$(".shareForm .input input");const n=$(".forInputSize");n.css({"font-size":a.css("font-size"),"font-family":a.css("font-family")})}function m(e){if(e.clientHeight>e.clientWidth){$(e).addClass("image--tall")}else{$(e).addClass("image--wide")}e.style.opacity="1";$("#loadingMsg").remove()}function h(){$(".ui-dialog-buttonset").find("button.btnAction").addClass("processing disabled")}function g(e){let t="/ajax/files/get_file_counts.php";if(e){t="/employees/files/getFileCounts/"+e}$.ajax({url:t,dataType:"json",success:function(e){const t="employee_upload";const a="/files/loadFiles?sectionId=signature&offset=0";const n=document.querySelector("#section-name .name");const o=n?n.dataset.fileSectionId:-1;const s=$("#file-sections .sectionLink");let l=null;s.each(((a,n)=>{const s=$(n);const r=s.data("section_id")||s.find("[data-section_id]").data("section_id");const d=s.data("section_type")||s.find("[data-section_type]").data("section_type");const c=(0,i.find)(e,(e=>r===Number(e.id)))||false;if(c){c.id=Number(c.id);c.count=Number(c.count)}else{return}if(window.isViewingSelfAsEss&&(c&&c.section_type===t||d===t)){s.toggleClass("hidden",c?c.count===0:0)}s.find(".icon span.count, .js-FileFolder__count").text(`(${c?c.count:0})`);if(c.id===Number(o)){l=c.count}}));if(typeof o==="string"){if(o==="all"){v((0,i.sumBy)(e,(e=>parseInt(e.count))))}else if(o==="signature"){$.get(a,(e=>v(e.sectionFileCount)))}else{v(l)}}if("determineBlankState"in window){window.determineBlankState()}}})}function v(e){if(e!==null){$(".heading-filter #section-name .count").text(`(${e})`)}}},20928:(e,t,a)=>{a.d(t,{UB:()=>r,TX:()=>s,Ag:()=>n.Ag,tb:()=>l,ZU:()=>n.ZU,b:()=>n.b,W9:()=>d,ZC:()=>i.ZC,QK:()=>i.QK,td:()=>n.td,NC:()=>n.NC,NR:()=>n.NR,VL:()=>n.VL,gQ:()=>n.gQ,RT:()=>n.RT,Yf:()=>c,i8:()=>i.i8,Lk:()=>n.Lk,KG:()=>n.KG,$Y:()=>i.$Y,aU:()=>i.aU,pS:()=>i.pS,vd:()=>n.vd,Eu:()=>n.Eu,sK:()=>n.sK,od:()=>i.od,pJ:()=>i.pJ,l3:()=>i.l3,yB:()=>i.yB});var n=a(72229);var i=a(38058);var o=a(78195);var $=a(26570);function s(e,t,a,n){let o=$("#file-sections > li:last-child").clone().attr("data-section_id",e).attr("data-foldername",t).attr("title",t);let s={sectionId:e,sectionName:t,sectionNameJSEncoded:t.replaceAll("'","\\'")};if(!o.hasClass("all")||!o.length){const a=n?"#firstEmployeeFolderMenuTemplate":"#firstFolderMenuTemplate";o=$(a).tmpl(s).attr("data-section_id",e).attr("data-foldername",t)}if(n){$(".blankState").hide();o.find(".files-section-wrapper").attr("id","files-table-wrapper_"+e).empty()}o.appendTo("#file-sections");o.removeClass("shared");o.removeClass("selected");if(a){o.addClass("droppable js-canUpload");(0,i.aU)(o,n)}else{o.removeClass("droppable")}const l=function(e,t){const a=$(e).find("span.sectionName").text().toLowerCase();const n=$(t).find("span.sectionName").text().toLowerCase();let i=0;if(a<n){i=-1}else if(a>n){i=1}return i};let r=$("#file-sections > li:not(.all)");r.sort(l);for(let e=0;e<r.length;e++){r[e].parentNode.appendChild(r[e])}}function l(e,t){let a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;const i={name:$("[data-section_id="+e+"]").data("foldername")};let o;let l="";switch(t){case"add":o="#addFolderTemplate";l=$.__("Add Folder");break;case"first":o="#firstFolderTemplate";l=$.__("Create a Folder First");if(a){t="add"}break;case"rename":o="#renameFolderTemplate";l=$.__("Rename Folder");break}const r=$(o).tmpl(i);window.BambooHR.Modal.setState({dangerousContent:r.html(),isOpen:true,onClose:()=>{window.BambooHR.Modal.setState({isOpen:false})},primaryAction:function(){const i=$("#fabricModalContent #folderName").val().trim();if(i===""){setMessage($.__("Please enter a name for this folder."),"error")}else{let o="/ajax/"+appPrefix+"files/edit_folder.php";let l={id:e,name:i,action:t,employeeId:n};if(a){o="/employees/"+appPrefix+"ajax/folder/"+t+"/"+n;l={id:e,name:i,employeeId:n}}$.ajax({type:"post",url:o,data:l,success:function(n){if(n.success){setMessage(n.success_message,"success");window.BambooHR.Modal.setState({isOpen:false});switch(t){case"add":s(n.section_id,i,n.can_edit,a);break;case"first":d(n.section_id,i,n.can_edit,a);break;case"rename":c(e,i);break}}else{setMessage(n.error,"error")}},dataType:"json"})}},primaryActionKey:"Enter",primaryActionText:$.__("Save"),title:l});$("#fabricModalContent #folderName").select().focus()}function r(e){const t=$(e).parent(".sectionLink");const a=$(t).data("section_id");if($(t).hasClass("selected")){$(t).removeClass("selected");$(t).find(".files-section-wrapper").hide();return}$(t).addClass("selected");loadSectionFiles(a,$("select[name=sort-files]").val())}function d(e,t,a,n){s(e,t,a,n);$("li.sectionLink.selected").removeClass("selected");$("li.sectionLink[data-section_id="+e+"]").addClass("selected");if(n){$(".blankState").hide();return(0,o.v4)(n)}(0,o.ws)()}function c(e,t){let a=$("li[data-section_id="+e+"]");a=$(".js-FileFolder[data-section_id="+e+"]");a.find(".sectionName").text(t);a.data("foldername",t);a.attr("title",t);if(a.hasClass("selected")){$("#files-content #section-name .name").text(t)}}},75845:(e,t,a)=>{var n=a(63196);var $=a(26570);const i=(e,t,a)=>{const i=(0,n.hr)(e,t);const o=(0,n.Qc)(e,t);const s=a&&typeof a==="function"?a:()=>{};Promise.all([i,o]).then((e=>{let[t,a]=e;(0,n.l6)({file:t.data,sfsItems:a.data,onDisableLink:s})})).catch((e=>{console.error(e);window.errorFallBack()}))};window.secureDownloadDetail=i;$("body").off("click.secure-download-detail-button").on("click.secure-download-detail-button",".js-secure-download-detail-button",(e=>{const{fileId:t,fileType:a}=e.target.dataset;const o=t=>{const a=$(e.currentTarget);const i=a.find(".sfsCount");const o=a.find(".sfsDetailCopy");if(i){$(i).text(t)}if(o){$(o).text((0,n.ao)(t))}if(t===0){a.addClass("hidden")}};i(t,a,o)}));var o=a(38592);var s=a(26570);var l={name:"auto-action"};function r(e){s.extend(l,e)}function d(){var e=(0,o.getParameterByName)(l.name);e=(0,o.sanitizeHtml)(e);if(!e){return}var t="data-auto-action-"+e;var a=s("["+t+"]");if(a.length<1){return}s.each(a,(function(e,a){s(a).trigger(a.getAttribute(t))}))}s((function(){d()}));var c={setOptions:r};var f=a(74372);var u=a(17842);var p=a.n(u);var m=a(71141);var h=a(78144);var g=a(67648);var v=a(26570);var jQuery=a(26570);const w=(0,m.isEnabled)("ESIGNATURE_INSTANCE_TOGGLE");let b=function(){var e=null;var t=null;function a(){e=null;t=null}function n(){s();v("#allEmployees").on("click",(function(){var e=v(".input-list");if(v(this).is(":checked")){e.addClass("disabled").attr("disabled");e.siblings("label").addClass("disabled")}else{e.removeClass("disabled").removeAttr("disabled");e.siblings("label").removeClass("disabled")}}));v(".js-toggleEmployeeInputList").on("click",(e=>{if(e.target.id==="someEmployeesRadioOption"){v(".js-EmployeeInputList").removeClass("hidden")}else if(e.target.id==="allEmployeesRadioOption"){v(".js-EmployeeInputList").addClass("hidden")}}))}function i(e){g.Z.fetchDisclaimer(e)}function s(){v("#allEmployees").off("click")}function l(){if(e&&e.length){return e}e=v(".free.ac_input");return e}function r(){if(t&&t.length){return t}t=v(".ac_results");return t}var d=new jQuery.Event("keydown",{which:40,keyCode:40});function c(){var e=v(this).closest("span.item");e.remove();var t=v(".inputs input").length===1;if(t){l().setOptions({extraParams:{all:true}}).flushCache().removeAttr("style")}return false}function f(e,t){var a=xmlEntities(t[2]);var n=xmlEntities(t[1]);const i=n!=="empty";var o=i?(0,h.b0)(t[0]):`${(0,h.b0)(t[0])} ${a}`;var s=i?n+"-"+a:n;var d=n+"Ids";if(n==="all"){l().css({position:"fixed",left:-9999});r().css("left",-9999)}v(`<span class="item" id="${s}">${o}<input type="hidden" name="${d}[]" value="${a}" /><ba-icon class="remove" name="fab-x-8x8"></ba-icon>`).insertBefore(".input-list span.input");l().val("");v("#"+s+" .remove").on("click",c)}function u(e){v(".input-list").autoInputList({autocompleteUrl:"/quicksearch/request/esignature",description:e,extraParams:{all:false},formatAutoItem:qsWithPhoto,formatTagItem:f,autocompleteOptions:{highlight:BambooHR.Utils.highlightTermInMarkup,minChars:1,scroll:false,max:4}}).activate()}function m(e,t,o,l,r){let d=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;const c=`/ajax/files/send_signature_request.php?workflowId=${e}`;var f=this;const m={isLoading:true,isOpen:true};if(d){window.BambooHR.Modal.setState({...m,sheetProps:null,type:"smallSheet"})}else{window.BambooHR.Modal.setState(m)}p().get(c).then((c=>{if(c&&c.data){const p={biId:"files-signature-request",dangerousContent:c.data,isLoading:false,onClose:()=>{s();a();window.BambooHR.Modal.setState({isOpen:false})},primaryAction:()=>{if(w){f.sendSignatureRequest(r);return}window.BambooHR.Modal.setState({isProcessing:true},true);f.send(e,o,l,d)},primaryActionText:v.__("Send Request"),title:t};window.BambooHR.Modal.setState({...p},true);a();u(v.__("Enter names or groups"));n();i(r)}}))}async function b(e){window.BambooHR.Modal.setState({isProcessing:true},true);try{const{allIds:t,employeeIds:a,groupIds:n,locationIds:i,message:s}=(0,o.getFormData)(".js-send-signature-request-form");const l={employeeIds:t==="on"||typeof a==="undefined"?null:a,esignatureTemplateId:e,groupIds:typeof n==="undefined"?null:n,locationIds:typeof i==="undefined"?null:i,mode:t==="on"?"all":"some",note:s||""};if(l.mode==="some"&&l.employeeIds===null&&l.groupIds===null&&l.locationIds===null){throw new Error("MISSING_IDS")}await p().post(`/esignature_instances`,l);const r=l.mode==="all"||l.employeeIds?.length>1||l.groupIds?.length>=1||l.locationIds?.length>=1;window.setMessage(r?v.__("The signature requests have been sent."):v.__("The signature request has been sent."),"success");document.dispatchEvent(new Event("Files:sendSignatureRequest:requestSent"));window.BambooHR.Modal.setState({isOpen:false},true)}catch(e){if(e.message==="MISSING_EMPLOYEE_IDS"){v(".js-highlightOnError").addClass("RecipientsSectionLabel--error");v(".js-missingDataError").removeClass("hidden");window.setMessage(v.__("There are no users in this group that are able to sign this document."),"error");return}window.errorFallBack()}finally{window.BambooHR.Modal.setState({isProcessing:false,sheetProps:{isProcessing:false}},true)}}function y(e,t,a){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;v.post("/ajax/files/send_signature_request.php?route=sendSignatureRequest&workflowId="+e,v(".js-send-signature-request-form").serialize(),(function(e){setMessage(e.error,e.success===true?"success":"error");if(e.success===true){BambooHR.Utils.eventTrack("e-Signatures","Request",t+" ("+a+")",e.numberOfRequests);document.dispatchEvent(new Event("Files:sendSignatureRequest:requestSent"));window.BambooHR.Modal.setState({isOpen:false},n)}else{v(".js-highlightOnError").addClass("RecipientsSectionLabel--error");v(".js-missingDataError").removeClass("hidden")}window.BambooHR.Modal.setState({isProcessing:false,sheetProps:{isProcessing:false}},true)}),"json").error((function(){errorFallBack();window.BambooHR.Modal.setState({isProcessing:false,sheetProps:{isProcessing:false}},true)}))}return{enableAutoInputList:u,openModal:m,send:y,sendSignatureRequest:b}}();var y=a(26570);let x={_selectors:{template:".template"},updateSignatureItem:function(e,t,a,n,i){var o=y('tr[data-file_id="'+e+'"]');o.find("li"+this._selectors.template).html("<a onclick=\"Files.SendSignatureRequest.openModal('"+t+"', '"+y.__("Send Signature Request")+"', '"+a+"', '"+n+"', "+i+')">'+y.__("Request Signature")+"...</a>")}};var S=a(41810);const C=window.BambooHR;C.Components=C.Components||{};C.Components.AutoActioner=c;Object.assign(window,f);window.Files=window.Files||{};window.Files.SendSignatureRequest=b;window.Files.GearIcon=x;window.updateFileUploadActions=S.Iw;window.centerFileUploadActions=S.TZ},97240:(e,t,a)=>{a.d(t,{o:()=>L});var n=a(89835);var i=a(23321);var o=a.n(i);var s=a(81814);var l=a(88604);var r=a(98675);var d=a(59592);var c=a(31112);var f=a(37194);var u=a(60042);var p=a.n(u);var m=a(59155);function h(e){const{hasSeparator:t=true,icon:a,children:i}=e;return(0,n.Z)("div",{className:p()("CompanyDataModalHeadline",{"CompanyDataModalHeadline--hasSeparator":t})},void 0,(0,n.Z)(m.Icon,{brand:true,name:a}),i?(0,n.Z)("h3",{},void 0,i):null)}function g(e){const{stages:t={},active:a}=e;const n=(0,i.useRef)();const s=(0,i.useRef)({});const l=(0,i.useRef)();const r=(0,i.useCallback)((e=>{const t=n.current;if(e.propertyName==="opacity"&&e.target.style.opacity===0){e.target.style.display="block"}t.style.height="";t.removeEventListener("transitionend",r)}),[]);(0,i.useEffect)((()=>{const e=l.current;const t=s.current[a];const i=n.current;i.addEventListener("transitionend",r);if(e){e.style.position="absolute";e.style.top=0;e.style.right=0;e.style.bottom=0;e.style.left=0;t.style.position="";t.style.top="";t.style.right="";t.style.bottom="";t.style.left="";i.style.height=`${e.offsetHeight}px`}l.current=t;i.style.height=`${t.offsetHeight}px`;return()=>i.removeEventListener("transitionend",r)}),[a]);return o().createElement("div",{ref:n,style:{overflow:"hidden",position:"relative",transition:"height 1s ease-in-out"}},Object.keys(t).map((e=>{const n=t[e];return o().createElement("div",{key:e,ref:t=>s.current[e]=t,style:{opacity:e===a?1:0,transition:"opacity 300ms ease-in-out",display:"flex",flexDirection:"column"}},n)})))}var $=a(26570);function v(e){const{isProcessing:t=false}=e;const a=(0,n.Z)("div",{},void 0,(0,n.Z)("h3",{},void 0,$.__(`We’re wiping the slate clean.`)),(0,n.Z)(f.Message,{text:$.__("Removing demo data will take a few seconds.\nPlease bear with us.")}));const i=(0,n.Z)("div",{},void 0,(0,n.Z)("h3",{},void 0,$.__("Ready for a fresh start?")),(0,n.Z)(f.Message,{text:$.__("This will remove all of the demo data in this account along with anything that you may have added. Are you sure that you want to remove this information?")}));return(0,n.Z)("div",{style:{textAlign:"center"}},void 0,(0,n.Z)(h,{hasSeparator:false,icon:"fab-broom-51x55"}),(0,n.Z)(g,{active:t?"waiting":"warning",stages:{warning:i,waiting:a}}))}function w(e){const{data:t={},onChange:a}=e;const{isAccepted:o,hasEmployees:l}=t;return(0,n.Z)(i.Fragment,{},void 0,(0,n.Z)(s.ys,{}),(0,n.Z)(s.dX,{hasEmployees:l,isAccepted:o,onHasEmployeesChange:e=>{a({hasEmployees:e,isAccepted:o})},onIsAcceptedChange:e=>{a({hasEmployees:l,isAccepted:e})}}))}var b=a(27357);function y(e){return e&&(e.status===b.O_.SIGNED||e.status===b.O_.DECLINED)}function x(e,t,a){let n=0;if(e){if(a==="failed"||a==="completed"&&y(t)){n=1}else if(a!=="loading"){n=2}}return n}var S=a(17842);var C=a.n(S);function F(){return C().post("/clear-demo-data")}var I=a(26570);function M(e,t){let{onComplete:a=(()=>{})}=t;const[n,o]=(0,i.useState)(1);const[s,l]=(0,i.useState)();return{data:s,currentStep:n,next:t=>{if(n===e){a(s)}else{o(n+1)}l(t)},totalSteps:e}}function E(e,t){let{next:a,currentStep:o,totalSteps:l}=t;const[r,f]=(0,i.useState)(false);const[u,p]=(0,i.useState)(false);const[m,h]=(0,i.useState)(null);A(r&&!u);(0,i.useEffect)((()=>{if(u){a({latestAgreement:m})}}),[u,m]);if(e!==o){return{}}return{content:(0,n.Z)(v,{isProcessing:r||u}),isProcessing:r||u,primaryAction:()=>{f(true);setTimeout((async()=>{try{await F()}catch(e){f(false);(0,d.f)(I.__(`Uh oh. Looks like your demo data didn’t clear. Please try again, or call us at 866-387-9595 for help.`),"error");return}try{const e=await(0,s.Js)();if(!e){throw new Error("No data processing agreement is available")}h(e);f(false);p(true)}catch(e){(0,d.f)("Uh oh! It looks like the next step didn’t load as expected. Please reload this page.","error")}}),3e3)},primaryActionText:I.__("Clear Data"),title:(0,n.Z)("div",{},void 0,I.__("Clear Demo Data"),l>1?(0,n.Z)(c.O,{currentStep:o,hasSeparator:!r,totalStepCount:l}):null)}}function T(e,t){let{data:a={},next:o,currentStep:l,totalSteps:r}=t;const{latestAgreement:f={}}=a;const[u,p]=(0,i.useState)({isAccepted:false,hasEmployees:false});const[m,h]=(0,i.useState)(false);const g=u.isAccepted||!u.hasEmployees;const v={setSessionMessage:true};if(e!==l||!a||!f){return{}}return{alternativeAction:null,content:(0,n.Z)(w,{data:u,isProcessing:m,onChange:e=>p(e)}),contentHasMaxHeight:false,hasCloseButton:false,isProcessing:m,primaryAction:g?async()=>{h(true);try{if(u.isAccepted){await(0,s.Uj)(f.id,v)}else{await(0,s.I6)(f.id,v)}o()}catch(e){h(false);(0,d.f)(I.__("Oops. Something went wrong. Please try again."),"error")}}:null,primaryActionText:I.__("Done"),secondaryAction:async()=>{h(true);try{await(0,s.cZ)(f.id,v);o()}catch(e){h(false);(0,d.f)(I.__("Oops. Something went wrong. Please try again."),"error")}},secondaryActionText:b.tf,title:(0,n.Z)("div",{},void 0,I.__("GDPR Compliance"),r>1?(0,n.Z)(c.O,{currentStep:l,hasSeparator:false,totalStepCount:r}):null)}}function A(e){const t=(0,i.useCallback)((e=>{e.preventDefault();e.returnValue=I.__("Are you sure you want to leave now?")}),[]);(0,i.useEffect)((()=>{if(e){window.addEventListener("beforeunload",t)}else{window.removeEventListener("beforeunload",t)}}),[t,e])}function P(e,t){const[a,n]=(0,i.useState)();const[o,s]=(0,i.useState)(false);(0,i.useEffect)((()=>{const a=async()=>{s("loading");try{n(await e());s("completed")}catch(e){s("failed")}};if(t){a()}}),[t]);return{value:a,status:o}}function j(e){const{value:t,status:a}=P((async()=>{try{return await(0,s.Js)()}catch(e){console.error("Failed to get latest Data Processing Agreement while clearing demo data!");throw e}}),e);return x(e,t,a)}function D(e){const{isOpen:t,onClose:a}=e;const n=j(t);const i=M(n,{onComplete:()=>window.location.reload()});const s=E(1,i);const d=T(2,i);const c=[s,d];if(n===0){return null}return o().createElement(r.u_,(0,l.Z)({isOpen:t,onClose:a},c[i.currentStep-1]))}var k=a(50463);var moment=a(82543);function O(e,t){const[a,n]=(0,i.useState)();(0,i.useEffect)((()=>{if(t){const e=moment(t.statusUpdatedDate);const a=moment().isBefore(e.add(1,"weeks"));if(t.status===b.O_.NEEDS_TO_SIGN){n(b.nK.REQUESTED_DPA_MODAL)}else if(t.status===b.O_.NEEDS_PROMPT||t.status===b.O_.COMPLETE_LATER&&!a){n(b.nK.CONDITIONAL_DPA_MODAL)}else if(t.status===b.O_.UPDATE_PENDING){const e=localStorage.getItem(s.q3);if(!e){n(b.nK.UPDATED_DPA_MODAL)}else if(k.ou.fromISO(e).diffNow("days").days<-7){n(b.nK.UPDATED_DPA_MODAL)}}}}),[t]);(0,i.useEffect)((()=>{if(e&&!a){n(e)}}),[e]);return{closeModal:()=>n(null),currentModal:a}}function L(e){const{defaultModal:t,onDefaultModalClose:a}=e;const{currentDpa:o}=(0,s.Qc)();const{currentModal:l,closeModal:r}=O(t,o);const d=()=>{if(l===t){a()}r()};return(0,n.Z)(i.Fragment,{},void 0,(0,n.Z)(D,{agreement:o,isOpen:l===b.nK.CLEAR_DEMO_DATA_MODAL,onClose:d}),(0,n.Z)(s.bI,{agreement:o,isOpen:l===b.nK.REQUESTED_DPA_MODAL,onClose:d}),(0,n.Z)(s.kh,{agreement:o,isOpen:l===b.nK.CONDITIONAL_DPA_MODAL,onClose:d}),(0,n.Z)(s.J_,{agreement:o,isOpen:l===b.nK.UPDATED_DPA_MODAL,onClose:d}))}},27357:(e,t,a)=>{a.d(t,{O_:()=>i,nK:()=>o,tf:()=>n});var $=a(26570);const n=$.__("Complete Later");const i=Object.seal({COMPLETE_LATER:"complete_later",DECLINED:"declined",NEEDS_PROMPT:"needs_prompt",NEEDS_TO_SIGN:"needs_to_sign",SIGNED:"signed",UPDATE_PENDING:"update_pending"});const o=Object.seal({CONDITIONAL_DPA_MODAL:"optionalDpaModal",CLEAR_DEMO_DATA_MODAL:"clearDemoDataModal",REQUESTED_DPA_MODAL:"requestedDpaModal",UPDATED_DPA_MODAL:"updatedDpaModal"})}},e=>{var t=t=>e(e.s=t);e.O(0,[4736],(()=>t(75845)));var a=e.O()}])}catch(e){const t=e&&(e.message||"Exception contains no error message");if(window.Rollbar&&typeof window.Rollbar.error==="function"){console.group("Logging error to Rollbar.");if(e.message!==t){console.error(t)}console.error(e);console.groupEnd();window.Rollbar.error("Error Handler Plugin: files.45fea418.dist.js - "+t,e)}else{console.log("Could not find Rollbar to log error.");throw e}}
//# sourceMappingURL=files.45fea418.dist.js.map